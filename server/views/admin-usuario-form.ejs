<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= usuario ? 'Editar UsuÃ¡rio' : 'Novo UsuÃ¡rio' %> - Agrovale</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <div class="sidebar">
    <h2>Agrovale</h2>
    <ul>
      <li><a href="/dashboard">ğŸ  InÃ­cio</a></li>
      <li><a href="/admin/usuarios">ğŸ‘¥ UsuÃ¡rios</a></li>
      <li><a href="/relatorios/auditoria">ğŸ§¾ Auditoria</a></li>
      <li><a href="/logout">ğŸšª Sair</a></li>
    </ul>
  </div>

  <div class="content">
    <header><h1>Agrovale â€” Painel Administrativo</h1></header>

    <form action="<%= usuario ? '/admin/usuarios/' + usuario.UsuarioID : '/admin/usuarios' %>" method="POST">
      <div class="form-group">
        <label>Nome</label>
        <input type="text" name="Nome" value="<%= usuario ? usuario.Nome : '' %>" required>
      </div>

      <div class="form-group">
        <label>UsuÃ¡rio</label>
        <input type="text" name="NomeUsuario" value="<%= usuario ? usuario.NomeUsuario : '' %>" required>
      </div>

      <div class="form-group">
        <label>Email</label>
        <input type="email" name="Email" value="<%= usuario ? usuario.Email : '' %>">
      </div>

      <div class="form-group">
        <label>Telefone</label>
        <input type="text" name="Telefone" value="<%= usuario ? usuario.Telefone : '' %>">
      </div>

      <div class="form-group">
        <label>CPF</label>
        <input type="text" name="CPF" value="<%= usuario ? usuario.CPF : '' %>">
      </div>

      <% if (!usuario) { %>
        <div class="form-group">
          <label>Senha</label>
          <input type="password" name="Senha" required>
        </div>
      <% } else { %>
        <div class="form-group">
          <label>Nova Senha</label>
          <input type="password" name="NovaSenha" placeholder="(deixe em branco para manter)">
        </div>
      <% } %>

      <div class="form-group">
        <label>PermissÃ£o</label>
        <select name="Role">
          <option value="user" <%= usuario && usuario.Role === 'user' ? 'selected' : '' %>>UsuÃ¡rio</option>
          <option value="admin" <%= usuario && usuario.Role === 'admin' ? 'selected' : '' %>>Administrador</option>
        </select>
      </div>

      <div class="form-group">
        <label><input type="checkbox" name="Ativo" value="1" <%= !usuario || usuario.Ativo ? 'checked' : '' %>> Ativo</label>
      </div>

      <button type="submit" class="btn btn-success">Salvar</button>
      <a href="/admin/usuarios" class="btn btn-secondary">Cancelar</a>
    </form>
  </div>
</body>
</html>